openapi: 3.0.0
components:
  schemas:
    content_type:
      type: string
      enum: [text, video, multi_image, image]
      description: type of content to be generated - text (text-only post), video (video content), multi_image (multiple images), image (single image)

    platform:
      type: array
      items:
        type: string
        enum: [instagram, facebook, tiktok, twitter]
        description: social media platform(s) for the content

    prompt_variable:
      type: object
      required:
        - name
        - values
      properties:
        name:
          type: string
          description: name of the variable
        values:
          type: array
          items:
            type: string
          description: possible values for the variable
        description:
          type: string
          description: optional description of the variable

    template_settings:
      type: object
      required:
        - prompt_template
        - visual_style
        - image
      properties:
        prompt_template:
          type: object
          required:
            - system_prompt
            - user_prompt
            - model
          properties:
            system_prompt:
              type: string
              description: system-level instructions for the ai.
            user_prompt:
              type: string
              description: the main prompt for content generation. uses {{variable}} syntax.
            temperature:
              type: number
              minimum: 0
              maximum: 2
              default: 1
            max_tokens:
              type: integer
            model:
              type: string
            variables:
              type: array
              items:
                $ref: '#/components/schemas/prompt_variable'
        visual_style:
          type: object
          properties:
            themes:
              type: array
              minItems: 1
              items:
                $ref: '../../schemas/common/visual-style.yaml'
        image:
          $ref: '../../schemas/content-types/image.yaml'

    template_info:
      type: object
      required:
        - name
        - brandId
        - contentType
        - targetPlatforms
      properties:
        name:
          type: string
        description:
          type: string
        brandId:
          type: string
        contentType:
          $ref: '#/components/schemas/content_type'
        targetPlatforms:
          type: array
          items:
            type: string
            enum: [instagram, facebook, tiktok, twitter]

    content_generation_template:
      allOf:
        - $ref: './base.yaml#/components/schemas/BaseModel'
        - type: object
          required:
            - templateInfo
            - schedule
            - settings
          properties:
            templateInfo:
              $ref: '#/components/schemas/template_info'
            schedule:
              $ref: '../../schemas/common/schedule.yaml'
            settings:
              $ref: '#/components/schemas/template_settings'

    content_template_create:
      type: object
      required:
        - templateInfo
        - schedule
        - settings
      properties:
        templateInfo:
          $ref: '#/components/schemas/template_info'
        schedule:
          $ref: '../../schemas/common/schedule.yaml'
        settings:
          $ref: '#/components/schemas/template_settings'

    content_template_update:
      type: object
      properties:
        templateInfo:
          type: object
          properties:
            name:
              type: string
            description:
              type: string
            contentType:
              $ref: '#/components/schemas/content_type'
            brandId:
              type: string
        schedule:
          $ref: '../../schemas/common/schedule.yaml'
        settings:
          $ref: '#/components/schemas/template_settings'

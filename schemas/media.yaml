# Media Model Spec
# Updated to match latest backend and frontend models

media_document:
  type: object
  required:
    - id
    - user_id
    - brand_id
    - blob_url
    - media_type
    - metadata
    - created_at
    - updated_at
  properties:
    id:
      type: string
    user_id:
      type: string
    brand_id:
      type: string
    blob_url:
      type: string
    media_type:
      type: string
      enum: [image, video]
    metadata:
      $ref: '#/media_metadata'
    created_at:
      type: string
      format: date-time
    updated_at:
      type: string
      format: date-time

media_metadata:
  type: object
  properties:
    file_name:
      type: string
    description:
      type: string
    suggested_name:
      type: string
    tags:
      type: array
      items:
        $ref: '#/cognitive_tag'
    categories:
      type: array
      items:
        $ref: '#/cognitive_category'
    objects:
      type: array
      items:
        $ref: '#/cognitive_object'
    caption:
      $ref: '#/cognitive_caption'
    dense_captions:
      type: array
      items:
        $ref: '#/cognitive_dense_caption'
    brands:
      type: array
      items:
        $ref: '#/cognitive_brand'
    people:
      type: array
      items:
        $ref: '#/cognitive_person'
    ocr_text:
      type: string
    cognitive_data:
      type: object
      additionalProperties: true

cognitive_tag:
  type: object
  properties:
    name:
      type: string
    confidence:
      type: number

cognitive_category:
  type: object
  properties:
    name:
      type: string
    confidence:
      type: number

cognitive_object:
  type: object
  properties:
    object:
      type: string
    confidence:
      type: number
    rectangle:
      $ref: '#/rectangle'

cognitive_caption:
  type: object
  properties:
    text:
      type: string
    confidence:
      type: number

cognitive_dense_caption:
  type: object
  properties:
    text:
      type: string
    confidence:
      type: number
    bounding_box:
      $ref: '#/rectangle'

cognitive_brand:
  type: object
  properties:
    name:
      type: string
    confidence:
      type: number

cognitive_person:
  type: object
  properties:
    confidence:
      type: number
    rectangle:
      $ref: '#/rectangle'

rectangle:
  type: object
  properties:
    x:
      type: number
    y:
      type: number
    w:
      type: number
    h:
      type: number

media_create:
  type: object
  properties:
    brand_id:
      type: string
    file_name:
      type: string
    media_type:
      type: string
      enum: [image, video]

media_update:
  type: object
  properties:
    file_name:
      type: string
    metadata:
      $ref: '#/media_metadata'
